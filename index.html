<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Free 30-Min Strategy Session | TIMONDRO</title>
<meta name="description" content="Answer a few quick questions and jump straight to WhatsApp with your answers to book a free 30-minute real estate strategy session for Turkey & Northern Cyprus."/>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&family=Poppins:wght@700;800;900&display=swap" rel="stylesheet">

<style>
  :root{
    --brand:#f15a29; --brand2:#ff8a50; --text:#0b0e11; --muted:#6b7280;
    --card:#11151a; --bd:#e5e7eb;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:#fff; color:var(--text);
    font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    -webkit-font-smoothing:antialiased;
  }
  a{color:inherit;text-decoration:none}
  img{max-width:100%;display:block}

  .container{max-width:1100px;margin:0 auto;padding:24px}

  /* Buttons */
  .btn{
    appearance:none;border:0;border-radius:12px;padding:14px 18px;font-weight:800;cursor:pointer;
    background:linear-gradient(135deg,var(--brand),var(--brand2));color:#081018;
    box-shadow:0 10px 30px rgba(223,102,21,.35);transition:transform .08s ease;
  }
  .btn:hover{transform:translateY(-1px)}
  .btn-ghost{background:#1a212b;color:#fff;box-shadow:none}

  /* Header */
  header{border-bottom:1px solid #e6e6e6;background:#fff}
  .nav{display:flex;align-items:center;justify-content:space-between;padding:12px 24px}
  .brand{display:flex;align-items:center;gap:10px}
  .brand h1{font-family:Poppins,Inter,sans-serif;font-size:18px;margin:0;font-weight:900}

  /* Hero */
  .hero{padding:40px 0 10px}
  .hero-intro{max-width:900px;margin:0 auto;text-align:center}
  .eyebrow{color:var(--brand);font-weight:900;letter-spacing:.18em;text-transform:uppercase}
  .eyebrow-zoom{font-size:18px;font-weight:700;color:var(--brand2);margin-left:8px}
  h2.title{font-family:Poppins,Inter,sans-serif;font-size:42px;line-height:1.15;margin:10px 0 12px}
  p.lead{font-size:18px;color:var(--muted);margin:0 auto;max-width:720px}
  .badge-row{display:flex;gap:12px;flex-wrap:wrap;justify-content:center;margin-top:16px}
  .badge{display:flex;gap:8px;align-items:center;border:1px solid #ececec;background:#fafafa;padding:8px 12px;border-radius:999px;font-size:13px}

  /* Trust logos */
  .trust{padding:18px 0 0}
  .trust .row{display:flex;gap:22px;flex-wrap:wrap;align-items:center;justify-content:center}
  .trust img{height:60px !important;width:auto !important;filter:none !important;opacity:1 !important;margin:0 8px !important}

  /* Sections */
  section{padding:60px 0}
  .section-title{font-family:Poppins,Inter,sans-serif;font-size:28px;margin:0 0 8px}
  .section-lead{color:var(--muted);margin:0 0 18px}

  /* Cards – fixed to avoid breaking */
  .cards{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
    gap:18px;
  }
  .card{
    display:flex; gap:12px; align-items:flex-start;
    background:var(--card);border:1px solid rgba(255,255,255,.06);
    border-radius:16px;padding:18px;color:#e8eef6;min-height:120px;
  }
  .icon{
    flex:0 0 38px; height:38px; width:38px; border-radius:10px;
    display:grid;place-items:center;
    background:linear-gradient(135deg,rgba(96,165,250,.25),rgba(45,212,191,.25));
    border:1px solid rgba(255,255,255,.1); font-size:18px;
  }
  .card h4{margin:2px 0 6px;font-size:18px}
  .card p{margin:0;font-size:14px;line-height:1.5}

  /* Steps showcase */
  .steps{
    display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px
  }
  .step{
    position:relative;background:var(--card);border:1px solid rgba(255,255,255,.06);
    border-radius:16px;padding:18px;color:#e8eef6
  }
  .step .num{
    position:absolute;top:-12px;left:-12px;width:44px;height:44px;border-radius:12px;
    display:grid;place-items:center;background:linear-gradient(135deg,var(--brand),var(--brand2));
    color:#081018;font-weight:900
  }

  /* Testimonials */
  .slider{position:relative}
  .slides{display:flex;gap:16px;overflow:auto;scroll-snap-type:x mandatory;padding-bottom:6px}
  .testimonial{scroll-snap-align:start;min-width:320px;background:#fff;color:#000;border:1px solid rgba(0,0,0,.1);border-radius:16px;padding:18px}
  .t-meta{display:flex;align-items:center;gap:10px;margin-top:12px}
  .avatar{width:36px;height:36px;border-radius:999px;background:linear-gradient(135deg,var(--brand2),var(--brand))}

  /* FAQ */
  .faq{max-width:900px;margin-inline:auto}
  .faq-item{border:1px solid rgba(0,0,0,.08);background:#fff;border-radius:14px;margin:10px 0;color:#111}
  summary.faq-q{padding:16px 18px;cursor:pointer;font-weight:600;list-style:none}
  summary.faq-q::-webkit-details-marker{display:none}
  .faq-a{padding:0 18px 16px 18px;color:#333}

  /* CTA */
  .cta{
    background:#fff;border:1px solid rgba(207,108,51,.15);border-radius:18px;
    padding:22px;display:flex;align-items:center;justify-content:space-between;gap:16px
  }
  .cta h3,.cta strong{color:var(--brand)}
  .cta p,.cta .section-lead{color:#000;font-weight:bold}

  /* Survey */
  .survey-wrap{max-width:960px;margin:28px auto 0}
  .sv-progress{display:flex;align-items:center;gap:10px;margin:0 0 20px}
  .sv-bar{flex:1;height:12px;background:#e5e7eb;border-radius:999px;overflow:hidden}
  .sv-bar>i{display:block;height:12px;background:linear-gradient(90deg,var(--brand),var(--brand2));width:0%}
  .sv-stepcount{font-size:14px;color:#64748b}
  .sv-card{background:#fff;border:1px solid var(--bd);border-radius:22px;box-shadow:0 12px 36px rgba(15,23,42,.12);padding:28px}
  .sv-q{margin:0 0 22px;font-size:24px;line-height:1.35}
  .sv-grid{display:grid;gap:16px}
  @media(min-width:700px){ .sv-grid{grid-template-columns:repeat(2,1fr)} }
  .sv-opt{border:2px solid var(--bd);background:#fff;border-radius:16px;padding:22px;text-align:center;cursor:pointer;font-size:18px}
  .sv-opt:hover{border-color:#d1d5db;box-shadow:0 10px 24px rgba(15,23,42,.1)}
  .sv-hidden{display:none}
  .sv-field{display:flex;gap:12px;flex-wrap:wrap;margin-top:12px}
  .sv-input{width:100%;padding:16px 18px;border:2px solid var(--bd);border-radius:14px;font-size:16px}
  .sv-next{padding:14px 18px;border-radius:12px;border:2px solid var(--brand);background:#fff;color:var(--brand);font-weight:800;cursor:pointer}
  .sv-actions{display:flex;gap:12px;flex-wrap:wrap;margin-top:16px}
  .sv-btn{padding:14px 18px;border-radius:12px;text-decoration:none;display:inline-block;font-weight:800}
  .sv-primary{color:#fff;background:linear-gradient(90deg,var(--brand),var(--brand2))}
  .sv-ghost{color:var(--brand);border:2px solid var(--brand);background:#fff}
  .sv-pre{background:#0b1220;color:#e2e8f0;border-radius:14px;padding:16px;overflow:auto;font-size:14px}

  @media(max-width:960px){
    h2.title{font-size:34px}
  }
</style>
</head>
<body>

<header>
  <div class="nav container">
    <div class="brand"><h1>Free Strategy Session</h1></div>
    <a class="btn" href="#survey">Book your session</a>
  </div>
</header>

<section class="hero">
  <div class="container">
    <div class="hero-intro">
      <div class="eyebrow">🚨 Last Chance! 🚨 <span class="eyebrow-zoom">Book Your 1:1 Online Meeting NOW!</span></div>
      <h2 class="title">⏳ 30 Minutes Only – Limited Spots Available! ⏳</h2>
      <p class="lead"><strong>Don’t miss your personalized real estate advice from an expert. <u>Book your spot before it’s too late!</u></strong></p>

      <div class="badge-row" aria-label="Highlights">
        <div class="badge">✅ Senior advisor, not a bot</div>
        <div class="badge">✅ Developer & resale options</div>
        <div class="badge">✅ Clear legal guidance</div>
        <div class="badge">✅ No pressure, no fees</div>
      </div>

      <div style="display:flex;gap:12px;margin-top:22px;flex-wrap:wrap;justify-content:center">
        <a class="btn" href="#survey">Book your session</a>
        <a class="btn btn-ghost" href="#process">See how it works</a>
      </div>

      <div class="trust">
        <div class="row" aria-label="As seen on / trusted by">
          <!-- filenames only; place images next to this file -->
          <img src="google.png" alt="Google">
          <img src="Meta-Logo.png" alt="Meta">
          <img src="Ibb_amblem.png" alt="Büyükşehir Belediyesi">
          <img src="handelsblatt.png" alt="Handelsblatt">
        </div>
      </div>
    </div>

    <!-- =============== SURVEY =============== -->
    <div id="survey" class="survey-wrap">
      <div class="sv-progress">
        <div class="sv-bar"><i id="sv-barfill" style="width:0%"></i></div>
        <div class="sv-stepcount">Step <b id="sv-stepnum">1</b>/<b id="sv-steptotal">15</b></div>
      </div>

      <!-- 1 -->
      <div class="sv-card sv-step" id="sv-step-1">
        <h2 class="sv-q">What’s your main goal?</h2>
        <div class="sv-grid">
          <button class="sv-opt" onclick="svAnswer('goal','Holiday Home'); svNext();">🏖️ Holiday Home</button>
          <button class="sv-opt" onclick="svAnswer('goal','Investment / Rental'); svNext();">💼 Investment / Rental</button>
          <button class="sv-opt" onclick="svAnswer('goal','Relocation'); svNext();">🏠 Relocation</button>
          <button class="sv-opt" onclick="svAnswer('goal','Residence Permit'); svNext();">🛂 Residence Permit</button>
        </div>
      </div>

      <!-- 2 -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-2">
        <h2 class="sv-q">Preferred location?</h2>
        <div class="sv-grid">
          <button class="sv-opt" onclick="svAnswer('location','Istanbul'); svNext();">🌆 Istanbul</button>
          <button class="sv-opt" onclick="svAnswer('location','Antalya / Alanya'); svNext();">🌴 Antalya / Alanya</button>
          <button class="sv-opt" onclick="svAnswer('location','Northern Cyprus'); svNext();">🌊 Northern Cyprus</button>
          <button class="sv-opt" onclick="svAnswer('location','Not sure yet'); svNext();">🤔 Not sure yet</button>
        </div>
      </div>

      <!-- 3 -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-3">
        <h2 class="sv-q">Property type?</h2>
        <div class="sv-grid">
          <button class="sv-opt" onclick="svAnswer('type','Apartment'); svNext();">🏢 Apartment</button>
          <button class="sv-opt" onclick="svAnswer('type','Villa / House'); svNext();">🏡 Villa / House</button>
          <button class="sv-opt" onclick="svAnswer('type','Land'); svNext();">🌿 Land</button>
          <button class="sv-opt" onclick="svAnswer('type','Open to options'); svNext();">🔍 Open to options</button>
        </div>
      </div>

      <!-- 4 -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-4">
        <h2 class="sv-q">Bedrooms needed?</h2>
        <div class="sv-grid">
          <button class="sv-opt" onclick="svAnswer('bedrooms','Studio / 1+1'); svNext();">🛏️ Studio / 1+1</button>
          <button class="sv-opt" onclick="svAnswer('bedrooms','2+1'); svNext();">🛏️ 2+1</button>
          <button class="sv-opt" onclick="svAnswer('bedrooms','3+1'); svNext();">🛏️ 3+1</button>
          <button class="sv-opt" onclick="svAnswer('bedrooms','4+1 or more'); svNext();">🛏️ 4+1+</button>
        </div>
      </div>

      <!-- 5 -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-5">
        <h2 class="sv-q">Budget range?</h2>
        <div class="sv-grid">
          <button class="sv-opt" onclick="svAnswer('budget','Up to €100k (≈ $110k / £86k / ₺3.9M)'); svNext();">🪙 Up to €100k</button>
          <button class="sv-opt" onclick="svAnswer('budget','€100k–€200k (≈ $110k–$220k / £86k–£172k / ₺3.9M–₺7.8M)'); svNext();">💶 €100k–€200k</button>
          <button class="sv-opt" onclick="svAnswer('budget','€200k–€500k'); svNext();">💷 €200k–€500k</button>
          <button class="sv-opt" onclick="svAnswer('budget','€500k+'); svNext();">💎 €500k+</button>
        </div>
        <div class="sv-help">Shown in EUR with helpful USD/GBP/TRY equivalents.</div>
      </div>

      <!-- 6 -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-6">
        <h2 class="sv-q">When do you plan to buy?</h2>
        <div class="sv-grid">
          <button class="sv-opt" onclick="svAnswer('timeline','Now'); svNext();">⚡ Now</button>
          <button class="sv-opt" onclick="svAnswer('timeline','Within 3 months'); svNext();">📅 Within 3 months</button>
          <button class="sv-opt" onclick="svAnswer('timeline','3–12 months'); svNext();">🗓️ 3–12 months</button>
          <button class="sv-opt" onclick="svAnswer('timeline','12+ months'); svNext();">🕰️ 12+ months</button>
        </div>
      </div>

      <!-- 7 -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-7">
        <h2 class="sv-q">How will you finance the purchase?</h2>
        <div class="sv-grid">
          <button class="sv-opt" onclick="svAnswer('financing','Cash'); svNext();">💵 Cash</button>
          <button class="sv-opt" onclick="svAnswer('financing','Developer Installments'); svNext();">🧱 Developer Plan</button>
          <button class="sv-opt" onclick="svAnswer('financing','Bank Loan / Mortgage'); svNext();">🏦 Bank Loan</button>
          <button class="sv-opt" onclick="svAnswer('financing','Not sure yet'); svNext();">🤷 Not sure yet</button>
        </div>
      </div>

      <!-- 8 -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-8">
        <h2 class="sv-q">Residence permit / citizenship importance?</h2>
        <div class="sv-grid">
          <button class="sv-opt" onclick="svAnswer('residency','Must-have'); svNext();">✅ Must-have</button>
          <button class="sv-opt" onclick="svAnswer('residency','Nice to have'); svNext();">✨ Nice to have</button>
          <button class="sv-opt" onclick="svAnswer('residency','Not important'); svNext();">🚫 Not important</button>
          <button class="sv-opt" onclick="svAnswer('residency','Need advice'); svNext();">🧭 Need advice</button>
        </div>
      </div>

      <!-- 9 -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-9">
        <h2 class="sv-q">Planning a viewing visit?</h2>
        <div class="sv-grid">
          <button class="sv-opt" onclick="svAnswer('visit','Yes, dates fixed'); svNext();">✈️ Yes, dates fixed</button>
          <button class="sv-opt" onclick="svAnswer('visit','Yes, planning soon'); svNext();">🗓️ Planning soon</button>
          <button class="sv-opt" onclick="svAnswer('visit','Want online/virtual'); svNext();">💻 Online / Virtual</button>
          <button class="sv-opt" onclick="svAnswer('visit','Not yet'); svNext();">⏳ Not yet</button>
        </div>
      </div>

      <!-- 10 -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-10">
        <h2 class="sv-q">Preferred contact method?</h2>
        <div class="sv-grid">
          <button class="sv-opt" onclick="svAnswer('contact_method','WhatsApp'); svNext();">📱 WhatsApp</button>
          <button class="sv-opt" onclick="svAnswer('contact_method','Phone call'); svNext();">📞 Phone</button>
          <button class="sv-opt" onclick="svAnswer('contact_method','Email'); svNext();">✉️ Email</button>
          <button class="sv-opt" onclick="svAnswer('contact_method','Any'); svNext();">🔔 Any</button>
        </div>
      </div>

      <!-- 11 Name -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-11">
        <h2 class="sv-q">Your full name</h2>
        <div class="sv-field">
          <input id="sv_full_name" class="sv-input" type="text" placeholder="Full Name" required>
          <button class="sv-next" onclick="if(svRequire('sv_full_name','name')) svNext();">Next</button>
        </div>
      </div>

      <!-- 12 Mobile -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-12">
        <h2 class="sv-q">Your mobile number (incl. country code)</h2>
        <div class="sv-field">
          <input id="sv_mobile" class="sv-input" type="tel" placeholder="+90 5xx xxx xx xx" required>
          <button class="sv-next" onclick="if(svRequire('sv_mobile','mobile')) svNext();">Next</button>
        </div>
      </div>

      <!-- 13 Email -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-13">
        <h2 class="sv-q">Your email</h2>
        <div class="sv-field">
          <input id="sv_email" class="sv-input" type="email" placeholder="name@example.com" required>
          <button class="sv-next" onclick="if(svRequireEmail('sv_email','email')) svNext();">Next</button>
        </div>
        <div class="sv-help">We’ll use this only to send property options and your session details.</div>
      </div>

      <!-- 14 Notes -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-14">
        <h2 class="sv-q">Any specific question or concern?</h2>
        <div class="sv-field">
          <textarea id="sv_notes" class="sv-input" rows="4" placeholder="Tell us what matters most…"></textarea>
          <button class="sv-next" onclick="svSaveText('sv_notes','notes'); svNext();">Finish</button>
        </div>
      </div>

      <!-- 15 Summary -->
      <div class="sv-card sv-step sv-hidden" id="sv-step-15" data-final="true">
        <h2 class="sv-q">Thanks! ✅</h2>
        <p class="sv-help">Below is your summary. We’ll try to open WhatsApp automatically; a button is provided as a fallback.</p>
        <pre class="sv-pre" id="sv-summary">{}</pre>
        <div class="sv-actions">
          <a id="sv-waSendBtn" class="sv-btn sv-primary" href="#" target="_blank" rel="noopener">Send on WhatsApp</a>
          <a class="sv-btn sv-ghost" href="#" onclick="svCopySummary();return false;">Copy Summary</a>
        </div>
      </div>
    </div>
    <!-- ============= SURVEY END ============= -->

  </div>
</section>

<!-- WHAT YOU’LL GET -->
<section>
  <div class="container">
    <h3 class="section-title">What you’ll get</h3>
    <p class="section-lead">Clarity on locations, legal process, and hand-picked properties that match your goals.</p>
    <div class="cards">
      <article class="card">
        <div class="icon">📍</div>
        <div>
          <h4>Location shortlist</h4>
          <p>Compare Istanbul, Antalya, and Northern Cyprus for lifestyle, yields, and appreciation potential.</p>
        </div>
      </article>
      <article class="card">
        <div class="icon">🧭</div>
        <div>
          <h4>Buying roadmap</h4>
          <p>Steps from viewing to Tapu: deposits, due diligence, taxes, utility setup, and move-in or renting.</p>
        </div>
      </article>
      <article class="card">
        <div class="icon">📊</div>
        <div>
          <h4>Hand-picked projects</h4>
          <p>New-build & resale options based on your budget, timeline, and whether you need residency.</p>
        </div>
      </article>
    </div>
  </div>
</section>

<!-- PROCESS -->
<section id="process">
  <div class="container">
    <h3 class="section-title">How it works</h3>
    <p class="section-lead">Simple, transparent, and tailored to you.</p>
    <div class="steps">
      <div class="step">
        <div class="num">1</div>
        <h4>Quick intro call</h4>
        <p>We align on your goals, budget, and preferred areas; we’ll also answer high-level questions.</p>
      </div>
      <div class="step">
        <div class="num">2</div>
        <h4>Strategy & shortlist</h4>
        <p>You’ll receive a location comparison and 5–10 curated options with pros/cons and payment plans.</p>
      </div>
      <div class="step">
        <div class="num">3</div>
        <h4>Next steps</h4>
        <p>Virtual/onsite viewings, lawyer check, reservation, and closing — all with our team guiding you.</p>
      </div>
    </div>
  </div>
</section>

<!-- TESTIMONIALS -->
<section>
  <div class="container slider">
    <h3 class="section-title">What buyers say</h3>
    <p class="section-lead">Real feedback from clients who purchased through us.</p>
    <div class="slides" aria-label="Testimonials">
      <figure class="testimonial">
        <blockquote>“They really listened. Within one week I had a clear plan and three excellent options in Istanbul.”</blockquote>
        <figcaption class="t-meta"><span class="avatar"></span> <strong>Anna K.</strong> — Germany</figcaption>
      </figure>
      <figure class="testimonial">
        <blockquote>“The residency guidance was gold. We bought in Kyrenia and rented it out in 10 days.”</blockquote>
        <figcaption class="t-meta"><span class="avatar"></span> <strong>H. Al-Saud</strong> — KSA</figcaption>
      </figure>
      <figure class="testimonial">
        <blockquote>“Transparent, fast, and no pressure. Highly recommend for Antalya/Alanya.”</blockquote>
        <figcaption class="t-meta"><span class="avatar"></span> <strong>M. Ionescu</strong> — Romania</figcaption>
      </figure>
    </div>
  </div>
</section>

<!-- FAQ -->
<section>
  <div class="container faq">
    <h3 class="section-title">FAQ</h3>
    <details class="faq-item">
      <summary class="faq-q">Is the session really free?</summary>
      <div class="faq-a">Yes. It’s a value call. If you decide to buy through us later, developers typically pay our fee.</div>
    </details>
    <details class="faq-item">
      <summary class="faq-q">Can you help with Ikamet (residency)?</summary>
      <div class="faq-a">We’ll explain the current thresholds and documents; we can recommend lawyers and handle the process end-to-end.</div>
    </details>
    <details class="faq-item">
      <summary class="faq-q">Do you cover both off-plan and ready units?</summary>
      <div class="faq-a">Yes — including payment plans on new builds and immediate-use resales with high rental demand.</div>
    </details>
    <details class="faq-item">
      <summary class="faq-q">How soon can we schedule viewings?</summary>
      <div class="faq-a">Virtual viewings can happen within 24–48 hours; onsite tours depend on your travel dates.</div>
    </details>
  </div>
</section>

<!-- CTA -->
<section>
  <div class="container">
    <div class="cta">
      <div>
        <h3>⚡ Limited Free Sessions Available ⚡</h3>
        <p class="section-lead">Book your free 30-minute strategy session with TIMONDRO today.</p>
      </div>
      <a class="btn" href="#survey">Book Now</a>
    </div>
  </div>
</section>

<footer style="border-top:1px solid #e6e6e6;background:#fff">
  <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:16px;padding:24px 24px 40px">
    <div style="display:flex;align-items:center;gap:12px">
      <strong>TIMONDRO Real Estate</strong>
      <span style="color:#666">• Türkiye • Istanbul • Antalya • Alanya • Belek • Northern Cyprus</span>
    </div>
    <div><a href="#survey" class="btn">Start now</a></div>
  </div>
</footer>

<script>
  /* =================== CONFIG =================== */
  const WA_NUMBER = '905425301811'; // International format, no + or spaces

  /* =================== STATE ==================== */
  const steps = Array.from(document.querySelectorAll('.sv-step'));
  const finalStep = steps[steps.length - 1];
  const totalQuestions = steps.length - 1; // exclude summary
  const answers = {};
  let current = 1;

  /* =================== ELMS ===================== */
  const stepNumEl = document.getElementById('sv-stepnum');
  const stepTotalEl = document.getElementById('sv-steptotal');
  const barFill = document.getElementById('sv-barfill');
  const summaryPre = document.getElementById('sv-summary');
  const waBtn = document.getElementById('sv-waSendBtn');

  stepTotalEl.textContent = totalQuestions;

  /* =============== HELPERS (exposed) =============== */
  function svAnswer(k,v){ answers[k] = v; }
  function svSaveText(id,k){
    const el = document.getElementById(id);
    if(!el) return;
    answers[k] = (el.value || '').trim();
  }
  function svRequire(id,key){
    const el = document.getElementById(id);
    if(!el) return false;
    const v = (el.value || '').trim();
    if(!v){ el.focus(); el.reportValidity?.(); return false; }
    answers[key] = v;
    return true;
  }
  function svRequireEmail(id,key){
    const el = document.getElementById(id);
    if(!el) return false;
    const v = (el.value || '').trim();
    if(!v || !v.includes('@')){ el.focus(); el.reportValidity?.(); return false; }
    answers[key] = v;
    return true;
  }
  function svCopySummary(){
    navigator.clipboard?.writeText(summaryPre.textContent);
    alert('Summary copied!');
  }

  function buildMsg(a){
    return [
      'New Buyer Survey (Turkey & Northern Cyprus)',
      '----------------------------------------',
      `Name: ${a.name||a['full name']||'-'}`,
      `Mobile: ${a.mobile||'-'}`,
      `Email: ${a.email||'-'}`,
      `Goal: ${a.goal||'-'}`,
      `Location: ${a.location||'-'}`,
      `Type: ${a.type||'-'}`,
      `Bedrooms: ${a.bedrooms||'-'}`,
      `Budget: ${a.budget||'-'}`,
      `Timeline: ${a.timeline||'-'}`,
      `Financing: ${a.financing||'-'}`,
      `Residency: ${a.residency||'-'}`,
      `Viewing: ${a.visit||'-'}`,
      `Contact Method: ${a.contact_method||'-'}`,
      '',
      `Notes: ${a.notes||'-'}`
    ].join('\n');
  }
  function waUrl(text){ return `https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(text)}`; }

  function showStep(n){
    steps.forEach((s,i)=> s.classList.toggle('sv-hidden', (i !== n-1)));
    stepNumEl.textContent = Math.min(n, totalQuestions);
    barFill.style.width = Math.round(((n-1)/totalQuestions)*100) + '%';
    document.getElementById('survey')?.scrollIntoView({behavior:'smooth',block:'start'});
  }

  function finish(){
    const msg = buildMsg(answers);
    summaryPre.textContent = msg;
    const url = waUrl(msg);
    waBtn.setAttribute('href', url);
    // try auto-open; button remains as fallback
    setTimeout(()=>{ window.open(url,'_blank'); }, 200);
  }

  function svNext(){
    current++;
    if(current > steps.length) current = steps.length;
    if(current === steps.length){ finish(); }
    showStep(current);
  }

  // Expose for inline handlers
  window.svAnswer = svAnswer;
  window.svSaveText = svSaveText;
  window.svRequire = svRequire;
  window.svRequireEmail = svRequireEmail;
  window.svCopySummary = svCopySummary;
  window.svNext = svNext;

  // Init
  showStep(1);
</script>
</body>
</html>
